name: CI

on: [push]

jobs:
  test:
    runs-on: ubuntu-18.04
    steps:
      - name: Check out code
        uses: actions/checkout@v1
      - name: Set up Go
        uses: actions/setup-go@v1
        with:
          go-version: 1.13
      - name: Install Nextflow
        run: |
          wget -qO- get.nextflow.io | bash
          sudo mv nextflow /usr/local/bin/
      # - name: Get data
      #   run: |
      #     wget https://github.com/plantinformatics/pretzel-input-generator/releases/download/testdata/test-data.tar.gz
      #     tar xzvf test-data.tar.gz 
      - name: NF test
        run: |          
          NXF_VER=19.10.0 nextflow -version
      # - name: Run test
      #   run: |          
      #     NXF_VER=19.10.0 nextflow run ${GITHUB_WORKSPACE} -profile MICROSPORIDIA,docker --max_cpus 2 --max_memory 4.GB -ansi-log false
        
        # docker run --rm -v "$PWD":/home/groovy/scripts -w /home/groovy/scripts groovy:3.0  groovy bin/paf2pretzel.groovy -h
